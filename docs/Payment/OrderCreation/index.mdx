---
title: Create order
id: createOrder 
sidebar_position: 1
toc_max_heading_level: 6
slug: /createorder
---

import AcquireOrder from "./_acquire-order.mdx";
import { useState } from "react";
import AccessoryContent from './_accessory-content.mdx';
import Paypage from "./_paypage.md";
import E_WALLET from "./_e-wallet.md";
import AutoDebit from "./_auto-debit.md";
import DirectPay from "./_direct-pay.md";
import DYNQR from "./_dynqr.md";
import JSAPI from "./_jsapi.md";
import QRPAY from "./_qrpay.md";
import InAPP from "./_in-app.md";
import ResponseExample from './_response-example.md'
import RequestHeader from '../../_request-header.mdx'
import ResponseHead from '../../Refund/_response-head.mdx'
export const PRODUCTS_ENUM = {
  PAYPAGE: "Paypage",
  IN_APP_SDK: "In-APP SDK",
  E_WALLET: "E-wallet",
  DYNQR: "DYNQR",
  QRPAY: "QRPAY",
  JSAPI: "JSAPI",
  AUTODEBIT: "AUTODEBIT",
  DIRECTPAY: "DIRECTPAY",
};

export const PRODUCTS_MAP = {
[PRODUCTS_ENUM.PAYPAGE]: Paypage,
[PRODUCTS_ENUM.E_WALLET]: E_WALLET,
[PRODUCTS_ENUM.DYNQR]: DYNQR,
[PRODUCTS_ENUM.QRPAY]: QRPAY,
[PRODUCTS_ENUM.JSAPI]: JSAPI,
[PRODUCTS_ENUM.AUTODEBIT]: AutoDebit,
[PRODUCTS_ENUM.DIRECTPAY]: DirectPay,
[PRODUCTS_ENUM.IN_APP_SDK]: InAPP,
};

export function SwitchProduct() {
  const [product, setProduct] = useState(PRODUCTS_ENUM.PAYPAGE);
  const ProductComponent = PRODUCTS_MAP[product];
  return (<div>
      <label htmlFor="product" className="">
        Payscene codes:
      </label>
      &nbsp;
      <select name="product" id="product" value={product} onChange={(e) => setProduct(e.target.value)}>
        {Object.values(PRODUCTS_ENUM).map((s) => (
          <option key={s} value={s}>
            {s}
          </option>
        ))}
      </select>
      <br />
      <br />
​      <li><b>paySceneParams</b> <span style={{ color: " #7d8793" }}>String</span></li>
​      <details open='true'>
​        <summary>
​          Show attributes
​        </summary>
​        <ProductComponent />
​      </details>
​    </div>
  );
}



Creates an order.

<br/>

### API URL

Staging : https://uat.test2pay.com/sgs/api/acquire2/placeOrder

Production : https://api.payby.com/sgs/api/acquire2/placeOrder

<br/>

### Request

#### Http Header

---

<details>
  <summary>Show attributes</summary>

  <RequestHeader/>
</details>

<br/>

#### Http Body

---

**requestTime** <span style={{color:" #7d8793"}}>Timestamp</span> <span style={{color:"#f19938"}}>Required</span>

Request time of the order. If the request time is more than 15 minutes away from the current time, the request will be rejected. This parameter is used to prevent repeated requests for orders that should have been cancelled due to timeouts.

Example value: 1581493898000

<br />

**bizContent** <span style={{color:" #7d8793"}}>Object</span>

The attributes are:

- **merchantOrderNo** <span style={{color:" #7d8793"}}>String</span> <span style={{color:"#f19938"}}>Required</span>

  The merchant's referece number of the request. Used to track every request.

  Example value: M965739182419

  Maximum length: `64`

<br />

- **subject** <span style={{color:" #7d8793"}}>String</span> <span style={{color:"#f19938"}}>Required</span>

  Description of this order.

  Example value: iPhone

  Maximum length: `12`

  <br />

- **totalAmount** <span style={{color:" #7d8793"}}>Money</span> <span style={{color:"#f19938"}}>Required</span>

  The attributes are:

  - **amount** <span style={{color:" #7d8793"}}>Decimal</span> <span style={{color:"#f19938"}}>Required</span>

    Allow 12 digits before the decimal point. Allow 2 digits after the decimal point.

    Example value: 12.34

  <br />

  - **currency** <span style={{color:" #7d8793"}}>String</span> <span style={{color:"#f19938"}}>Required</span>

  The code to identify the order currency. Currently only AED is supported.

  Example value: AED

<br />

- **expiredTime** <span style={{color:" #7d8793"}}>Timestamp</span>

  The order expiration time, after which the payment cannot be completed.

  The value should not exceed 48 hours after the request time. If no parameter is passed, the default expiration time is 2 hours after the request time.

  Example value: 1581493898000

<br />

- **payeeMid** <span style={{color:" #7d8793"}}>String</span>

  The payee can be another merchant. If no parameter is passed, the default payee is the merchant itself.

  Example value: 200001200101

  Maximum length: `12`

<br />

- **paySceneCode** <span style={{color:" #7d8793"}}>Enum</span> <span style={{color:"#f19938"}}>Required</span>

  Payment scene you are going to use. The possible values are `PAYPAGE`, `INAPP`, `EWALLET`, `DYNQR`, `QRPAY`, `JSAPI`, `AUTODEBIT`, `DIRECTPAY`, etc.<br/>

  Select from the drop down to get parameters that need to be passed in different scenarios.
  
  <SwitchProduct />


- **notifyUrl** <span style={{color:" #7d8793"}}>String</span>

  To receive asynchronous notifications of order status updates, you can pass the notify URL.

  Example value: https://www.yoursite.com

  Maximum length: `200`

<br />

- **secondaryMerchantId** <span style={{color:" #7d8793"}}>String</span>

  If you are a platform and the transaction was made at a merchant under your platform, you can use this parameter to allocate the funds collected. To learn more about this feature please contact PayBy. The secondary merchant id represents the merchant's member id on your platform.

  Maximum length: `200`

<br />

- **deviceId** <span style={{color:" #7d8793"}}>String</span>

  If the transaction wad made on a terminal or virtual device, the device id can be passed for transaction data statistics.
  Note that this parameter must be passed if you are using the secondery merchant function, this parameter must be passed.

  Maximum length: `200`

<br />

- **accessoryContent**

  This can be useful for storing additional information about the order.
  
  <details>
    <summary>Show attributes</summary>
    <AccessoryContent/> 
  </details>

<br/>

#### Request sample

```json
Http Header
{
    "Content-Language": "en",
    "Content-Type": "application/json",
    "sign": "IXJI/QicPQotIsIDBcSGIg6jtJUXs1rTuifQFZUNd3KDTl25GKmpYO7OrkaKkTV0shDRitLmkxJCe3Z60zHE2ZSeVczrhwrnmuMG+bX9N22Hw821H6MydsXetYHRnyf5dPbgpmVja582w49grA6jRlVFAVMYdxKJDPSCb2X/IpltvyrLQ1Wt+lqr+fnpYXvyON6/PIZIQIknC8BVddVahxJnaC6HEagvJf6gskz22/DFfPHT1mlMA9pg8qrbh4O7DYZahf8TB3nIzAPc/FHOUZkYYTT2c8m4eLL8740nJVK7D3IOSqSnBAU/iJ2omjPPFvRCCSqzz17pkGsT7AW91w==",
    "Partner-Id": "200000000888"
}

Http Body
{
    "requestTime": 1581404947666,
    "bizContent": {
        "merchantOrderNo": "M965739182419",
        "subject": "Your subject",
        "totalAmount": {
            "currency": "AED",
            "amount": 1.01
        },
        "paySceneCode": "PAYPAGE",
        "paySceneParams": {
            "redirectUrl": "http://www.yoursite.com?orderId=123"
        },
        "reserved": "order desc",
        "notifyUrl": "http://www.yoursite.com",
        "accessoryContent": {
            "amountDetail": {
                "vatAmount": {
                    "currency": "AED",
                    "amount": 20.65
                },
                "amount": {
                    "currency": "AED",
                    "amount": 1.09
                }
            },
            "goodsDetail": {
                "body": "Gifts",
                "categoriesTree": "CT12",
                "goodsCategory": "GC10",
                "goodsId": "GI1005",
                "goodsName": "candy flower",
                "price": {
                    "currency": "AED",
                    "amount": 10.87
                },
                "quantity": 2
            },
            "terminalDetail": {
                "operatorId": "OP1000000000000001",
                "storeId": "SI100000000000002",
                "terminalId": "TI100999999999900",
                "merchantName": "candy home",
                "storeName": "lovely house"
            }
        }
    }
}

```

<br />

### Response

#### Http Header

---

**sign** <span style={{color:" #7d8793"}}>String</span> <span style={{color:"#f19938"}}>Required</span>

When Payby sends response, Payby will use its own private key to sign the message, and the merchant uses Payby 's public key to verify the signature. If the verification is passed, it proves that the response was sent by Payby and not faked by others.

<br />

#### Http Body

---

**head**

  <details>
    <summary>Show attributes</summary>
    <ResponseHead />
  </details>
<br/>

**body**

**Notice **:Body is returned only when `applystatus` = `success`, and `code` = `0`. If `applystatus` = `error` or `failed`; or `applystatus` = `success`, `code` !=`0` , that indicates an error. Please check errors and try again.

- **acquireOrder** <span style={{color:" #7d8793"}}>Object</span>

  <details>
  <summary>Show attributes</summary>
    <AcquireOrder />
  </details>

  <br/>

- **interactionParams**

  In different payment scenarios, PayBy may return different parameters, allowing the merchant system and PayBy continue to interact to complete the order.

  - **tokenUrl** <span style={{color:" #7d8793"}}>String</span>

    Appears only in the following payment scene.

    `PAYPAGE`. A link that redirects the payer to the paypage.

    `INAPP`. A link that redirects the payer to the paypage or the chosen E-wallet.

    `DYNQR`. A link that redirects the payer to the paypage.

    `JSAPI`. A link that redirects the payer to the checkout within the APP.

    <br />

  - **deepLink** <span style={{color:" #7d8793"}}>String</span>

    Appears only in `EWALLET` payment scene.

    When the payer chooses to open another e-wallet for payment at the merchant's payment page, PayBy will return a link to redirect the payer to the e-wallet's checkout.

    <br />

  - **threeDSecureDom** <span style={{color:" #7d8793"}}>String</span>

    Appears only in `DIRECTPAY` payment scene.

    If the merchant decides or PayBy's risk control system recognizes that the transaction requires 3DS verification, the 3DS verification link will be returned.

    <br />

  > The `AUTODEBIT` and `QRPAY `payment scene don't have `interactionParams`.

<br />

<ResponseExample/>

<br />
